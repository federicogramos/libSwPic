//==============================================================================
// Archivo: t1.c
// Autor: Federico Ramos
// Modificado: 03-11-2023
//==============================================================================


//==============================================================================
// INCLUDE
#include <t1.h>
#include <t1_proj_delays.h>// Delay de timers por parte de usuario
//==============================================================================


//==============================================================================
// DEFINICION DE VARIABLES GLOBALES
t_t1 t1Mem[T1_CANT];
//==============================================================================


//==============================================================================
// Si se inicializa con prescaler = 0, ni arranca ni tenera timeout.
//==============================================================================
void t1Driver(char i)
   {
   if(!t1Mem[i].pause && t1Mem[i].prescaler>0)
      {
      t1Mem[i].prescaler--;
      if(t1Mem[i].prescaler==0)
         {
         t1Mem[i].flag=1;
         if(t1Mem[i].loop) t1Mem[i].prescaler=t1DelayConstant[i];
         }
      }
   }
